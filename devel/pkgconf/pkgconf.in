#!/bin/sh
# need to gen config.h and libpkgconf/config.h
. ${PORTS}/mk/ingen.sh

srcdir="."
outdir="."

flags=` cat <<-EOF
	\$cflags
	-I\$srcdir
	-DPKG_DEFAULT_PATH='"\$prefix/lib/pkgconfig:$prefix/share/pkgconfig"'
	-DSYSTEM_INCLUDEDIR='"\$prefix/include"'
	-DSYSTEM_LIBDIR='"\$prefix/lib"'
EOF
`

binaries=` cat <<-EOF
	pkgconf
EOF
`

pkgconfobjs=` cat <<-EOF
	getopt_long.c
	main.c
EOF
`

libs=` cat <<-EOF
	libpkgconf/libpkfconf.a
EOF
`

libpkgconf=` cat <<-EOF
	libpkgconf/argvsplit.c
	libpkgconf/audit.c
	libpkgconf/bsdstubs.c
	libpkgconf/cache.c
	libpkgconf/client.c
	libpkgconf/dependency.c
	libpkgconf/fileio.c
	libpkgconf/fragment.c
	libpkgconf/path.c
	libpkgconf/pkg.c
	libpkgconf/queue.c
	libpkgconf/tuple.c
EOF
`

sets cflags  $flags
sets ldflags libpkgconf.a
bin  pkgconf $pkgconfobjs
lib  libpkgconf/libpkgconf.a $libpkgconf
