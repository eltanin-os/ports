#!/bin/sh
. ${PORTS}/mk/ingen.sh

srcdir="."
outdir="."

cflags=` cat <<-EOF
	-I .
	-DPKG_DEFAULT_PATH='"\$prefix/lib/pkgconfig:$prefix/share/pkgconfig"'
	-DSYSTEM_INCLUDEDIR='"\$prefix/include"'
	-DSYSTEM_LIBDIR='"\$prefix/lib"'
EOF
`

binaries=` cat <<-EOF
	pkgconf
EOF
`

pkgconfobjs=` cat <<-EOF
	getopt_long.c
	main.c
	renderer-msvc.c
EOF
`

ldlibs=` cat <<-EOF
	libpkgconf/libpkgconf.a
EOF
`

libpkgconf=` cat <<-EOF
	libpkgconf/argvsplit.c
	libpkgconf/audit.c
	libpkgconf/bsdstubs.c
	libpkgconf/cache.c
	libpkgconf/client.c
	libpkgconf/dependency.c
	libpkgconf/fileio.c
	libpkgconf/fragment.c
	libpkgconf/path.c
	libpkgconf/pkg.c
	libpkgconf/queue.c
	libpkgconf/tuple.c
EOF
`

incprefix="pkgconf/libpkgconf/"
includes=` cat <<-EOF
	libpkgconf/bsdstubs.h
	libpkgconf/iter.h
	libpkgconf/libpkgconf-api.h
	libpkgconf/libpkgconf.h
	libpkgconf/stdinc.h
EOF
`

manpages=` cat <<-EOF
	man/pkgconf.1
	man/pkg.m4.7
	man/pc.5
EOF
`

auto
copy libpkgconf/config.h     ../mk/config.h
bin  pkgconf                 $pkgconfobjs
lib  libpkgconf/libpkgconf.a $libpkgconf
mans $manpages
